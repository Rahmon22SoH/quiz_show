{% extends "base.html" %}

{% block page_content %}
<div class="container py-4">
	<div class="row justify-content-center">
		<div class="col-md-8">
			<div class="card shadow">
				<div class="card-header bg-primary text-white">
					<h5 class="mb-0">Редактирование профиля</h5>
				</div>
				<div class="card-body">
					<form method="POST" class="profile-edit-form">
						{{ form.hidden_tag() }}

						<div class="mb-3">
							{{ form.username.label(class="form-label") }}
							{{ form.username(class="form-control") }}
							{% if form.username.errors %}
							<div class="invalid-feedback d-block">
								{% for error in form.username.errors %}
								{{ error }}
								{% endfor %}
							</div>
							{% endif %}
						</div>

						<div class="mb-3">
							{{ form.first_name.label(class="form-label") }}
							{{ form.first_name(class="form-control") }}
							{% if form.first_name.errors %}
							<div class="invalid-feedback d-block">
								{% for error in form.first_name.errors %}
								{{ error }}
								{% endfor %}
							</div>
							{% endif %}
						</div>

						<div class="mb-3">
							{{ form.last_name.label(class="form-label") }}
							{{ form.last_name(class="form-control") }}
							{% if form.last_name.errors %}
							<div class="invalid-feedback d-block">
								{% for error in form.last_name.errors %}
								{{ error }}
								{% endfor %}
							</div>
							{% endif %}
						</div>

						<div class="mb-3">
							{{ form.phone.label(class="form-label") }}
							{{ form.phone(class="form-control", disabled=true) }}
							<div class="form-text">Телефон синхронизируется с Telegram</div>
						</div>

						<div class="mb-3">
							<label class="form-label"><i class="fab fa-telegram me-2"></i>Telegram</label>
							{% if current_user.telegram_link %}
							<div>
								<a href="{{ current_user.telegram_link }}" target="_blank" rel="noopener noreferrer">
									{{ current_user.telegram_link }}
								</a>
							</div>
							{% else %}
							<div class="text-muted">Не привязан</div>
							{% endif %}
						</div>

						<div class="d-flex justify-content-between">
							<a href="{{ url_for('profile.index') }}" class="btn btn-secondary">
								<i class="fas fa-arrow-left me-2"></i>Назад
							</a>
							{{ form.submit(class="btn btn-primary") }}
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}